template : focal.yaml

eval_variables.sccdname: { type: ThisFileTag, index: '$chip_num', index_key: 'image_num' }

input.all_files:
  index_key: exp_num
  dir: { type: Catalog, col: 0}
  files:
    type: FormattedStr
    format: "%s_??.fits.fz"
    items:
      - { type: Catalog, col: 1 }

image.wcs.file_name: { type: ThisFileName, index: '$chip_num' }

output.nchips: { type: NFiles } # The number of chips per exposure
output.file_name:
  type: FormattedStr
  format: "sim_%s_%s.fits.fz"
  items:
    - { type: Catalog, col: 1 }
    - '$ccdname'


input.catalog.file_name: exp_list_nersc